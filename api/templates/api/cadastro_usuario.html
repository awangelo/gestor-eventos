{% extends 'api/base.html' %}

{% block title %}Cadastro de Usuários{% endblock %}

{% block content %}
<section class="prototype-hero">
    <h1>Cadastro de usuários</h1>
    <p>Fluxo utilizado por administradores e organizadores para registrar novos perfis no sistema.</p>
</section>

<section class="prototype-grid">
    <article class="prototype-card">
        <span class="badge">Formulário principal</span>
        <form method="post">
            {% csrf_token %}
            {% if form_errors %}
                <div class="alert alert-error">
                    <ul>
                        {% for error in form_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
            {% if form_success %}
                <div class="alert alert-success">{{ form_success }}</div>
            {% endif %}
            <div class="form-group">
                <label for="usuario-nome">Nome completo</label>
                <input id="usuario-nome" name="nome" type="text" placeholder="Ex.: Ana Paula Moreira" value="{{ form_data.nome|default:'' }}">
            </div>
            <div class="form-group">
                <label for="usuario-username">Usuário de login</label>
                <input id="usuario-username" name="username" type="text" placeholder="ana.moreira" value="{{ form_data.username|default:'' }}">
            </div>
            <div class="form-group">
                <label for="usuario-email">E-mail</label>
                <input id="usuario-email" name="email" type="email" placeholder="ana@sgea.local" value="{{ form_data.email|default:'' }}">
            </div>
            <div class="form-group">
                <label for="usuario-telefone">Telefone</label>
                <input id="usuario-telefone" name="telefone" type="tel" placeholder="(61) 90000-0000" value="{{ form_data.telefone|default:'' }}">
            </div>
            <div class="form-group">
                <label for="usuario-perfil">Perfil</label>
                <select id="usuario-perfil" name="perfil">
                    <option value="">Selecione</option>
                    {% for value, label in perfis %}
                        <option value="{{ value }}" {% if form_data.perfil == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="usuario-instituicao">Instituição (obrigatória para alunos e professores)</label>
                <input id="usuario-instituicao" name="instituicao" type="text" placeholder="Universidade de Brasília" list="instituicoes-options" value="{{ form_data.instituicao|default:'' }}">
                <datalist id="instituicoes-options">
                    {% for value, label in instituicoes %}
                        <option value="{{ value }}" label="{{ label }}"></option>
                    {% endfor %}
                </datalist>
            </div>
            <div class="form-group">
                <label for="usuario-senha">Senha</label>
                <input id="usuario-senha" name="senha" type="password" value="" required>
                <small style="display: block; margin-top: 0.25rem; color: var(--muted); font-size: 0.85rem;">
                    Mínimo 8 caracteres, contendo letras, números e caracteres especiais
                </small>
            </div>
            <div class="form-group">
                <label for="usuario-confirmar-senha">Confirmar Senha</label>
                <input id="usuario-confirmar-senha" name="confirmar_senha" type="password" value="" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn primary">Salvar usuário</button>
                <button type="reset" class="btn secondary">Limpar campos</button>
            </div>
        </form>
    </article>
</section>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function(){
        $('#usuario-telefone').mask('(00) 00000-0000');
    });
</script>
{% endblock %}
